{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport izitoast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputEl = document.querySelector('input[type=\"text\"]');\nconst buttonEl = document.querySelector('button[type=\"button\"]');\nconst dayEl = document.querySelector('[data-days]');\nconst hourEl = document.querySelector('[data-hours]');\nconst minEl = document.querySelector('[data-minutes]');\nconst secEl = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\nlet intervalId;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (new Date(selectedDates[0]).valueOf() < new Date().valueOf()) {\n      izitoast.error({\n        position: 'topRight',\n        message: 'Please choose a date in the future',\n      });\n      buttonEl.disabled = true;\n    } else {\n      inputEl.style.background = '#FFFFFF';\n      buttonEl.disabled = false;\n      userSelectedDate =\n        new Date(selectedDates[0]).valueOf() - new Date().valueOf();\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    }\n  },\n};\n\nflatpickr(inputEl, options);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  buttonEl.disabled = true;\n});\n\nbuttonEl.addEventListener('click', () => {\n  if (intervalId) {\n    clearInterval(intervalId);\n  }\n  intervalId = setInterval(() => {\n    inputEl.style.background = '#F5F5F5';\n    buttonEl.disabled = true;\n    userSelectedDate = userSelectedDate - 1000;\n    let newTime = convertMs(userSelectedDate);\n    renderTime(newTime);\n    if (newTime.days + newTime.hours + newTime.minutes + newTime.seconds <= 0) {\n      clearInterval(intervalId);\n      inputEl.style.background = '#FFFFFF';\n    }\n  }, 1000);\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction renderTime(newTime) {\n  dayEl.textContent = addLeadingZero(newTime.days);\n  hourEl.textContent = addLeadingZero(newTime.hours);\n  minEl.textContent = addLeadingZero(newTime.minutes);\n  secEl.textContent = addLeadingZero(newTime.seconds);\n}\n"],"names":["inputEl","buttonEl","dayEl","hourEl","minEl","secEl","userSelectedDate","intervalId","options","selectedDates","izitoast","flatpickr","newTime","convertMs","renderTime","ms","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"sGAKA,MAAMA,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAW,SAAS,cAAc,uBAAuB,EACzDC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAQ,SAAS,cAAc,gBAAgB,EAC/CC,EAAQ,SAAS,cAAc,gBAAgB,EAErD,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjB,IAAI,KAAKA,EAAc,EAAE,EAAE,QAAO,EAAK,IAAI,OAAO,WACpDC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,oCACjB,CAAO,EACDT,EAAS,SAAW,KAEpBD,EAAQ,MAAM,WAAa,UAC3BC,EAAS,SAAW,GACpBK,EACE,IAAI,KAAKG,EAAc,EAAE,EAAE,QAAO,EAAK,IAAI,OAAO,UAChDF,GACF,cAAcA,CAAU,EAG7B,CACH,EAEAI,EAAUX,EAASQ,CAAO,EAE1B,SAAS,iBAAiB,mBAAoB,IAAM,CAClDP,EAAS,SAAW,EACtB,CAAC,EAEDA,EAAS,iBAAiB,QAAS,IAAM,CACnCM,GACF,cAAcA,CAAU,EAE1BA,EAAa,YAAY,IAAM,CAC7BP,EAAQ,MAAM,WAAa,UAC3BC,EAAS,SAAW,GACpBK,EAAmBA,EAAmB,IACtC,IAAIM,EAAUC,EAAUP,CAAgB,EACxCQ,EAAWF,CAAO,EACdA,EAAQ,KAAOA,EAAQ,MAAQA,EAAQ,QAAUA,EAAQ,SAAW,IACtE,cAAcL,CAAU,EACxBP,EAAQ,MAAM,WAAa,UAE9B,EAAE,GAAI,CACT,CAAC,EAED,SAASa,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASP,EAAWF,EAAS,CAC3BV,EAAM,YAAckB,EAAeR,EAAQ,IAAI,EAC/CT,EAAO,YAAciB,EAAeR,EAAQ,KAAK,EACjDR,EAAM,YAAcgB,EAAeR,EAAQ,OAAO,EAClDP,EAAM,YAAce,EAAeR,EAAQ,OAAO,CACpD"}